<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hindi Learning System</title>
    <script src=https://cdn.tailwindcss.com></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .word-animate {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans min-h-screen flex items-center justify-center p-4">
    <div id="feedback" class="fixed top-8 left-1/2 -translate-x-1/2 py-3 px-6 rounded-xl font-bold opacity-0 transition-opacity duration-300" aria-live="polite"></div>

    <div class="w-full max-w-lg bg-white rounded-3xl shadow-lg p-8">
        <header class="flex justify-between items-center mb-6">
            <div>
                <h1 class="text-3xl font-extrabold text-gray-800">Hindi!</h1>
                <div id="session-stats" class="text-sm text-gray-600 mt-1"></div>
            </div>
            <div class="text-gray-600 text-right">
                <div id="mastery-level" class="text-lg font-bold"></div>
                <div id="words-learned" class="text-sm"></div>
                <div id="streak-bonus" class="text-sm text-emerald-500 hidden streak-bonus">
                    +Streak Bonus!
                </div>
            </div>
        </header>
        
        <div class="relative h-3 bg-gray-100 rounded-full mb-8">
            <div id="progress" class="h-full bg-indigo-500 rounded-full transition-all duration-300 ease-out" style="width: 0%"></div>
            <div id="progress-label" class="absolute -top-6 right-0 text-sm text-gray-600"></div>
        </div>

        <main class="flex items-center justify-between gap-4 mb-8 w-full">
            <div class="flex-1 bg-gray-50 rounded-xl py-3 px-2">
                <div id="word-container" class="text-center">
                    <div class="text-4xl font-extrabold mt-2 text-indigo-500 word-animate flex items-center justify-center">
                        Ready?!
                    </div>
                    <div id="difficulty-indicator" class="text-sm text-gray-500 mt-2"></div>
                </div>
            </div>
            
            <div class="flex gap-3">
                <button id="get-word-btn" class="w-12 h-12 bg-indigo-500 hover:bg-indigo-600 active:bg-indigo-700 text-white rounded-xl flex items-center justify-center text-2xl transition-colors" aria-label="Get a new word">
                    <i class="fa-solid fa-circle-right"></i>
                </button>
                <button id="reveal-answer-btn" class="w-12 h-12 bg-indigo-500 hover:bg-indigo-600 active:bg-indigo-700 text-white rounded-xl flex items-center justify-center text-2xl transition-colors" aria-label="Reveal the answer">
                    <i class="fas fa-eye"></i>
                </button>
            </div>
        </main>

        <div id="answer-container" class="hidden bg-gray-50 rounded-xl p-4 mb-6">
            <div class="text-lg text-gray-700"></div>
            <div id="word-stats" class="text-sm text-gray-500 mt-2"></div>
        </div>

        <section id="mark-section" class="hidden space-y-3">
            <button id="well-known-btn" class="w-full bg-emerald-500 hover:bg-emerald-600 active:bg-emerald-700 text-white rounded-xl py-4 px-6 text-lg font-bold transition-all">
                <i class="fas fa-check-circle mr-2"></i> I know this!
            </button>
            <button id="not-known-btn" class="w-full bg-red-500 hover:bg-red-600 active:bg-red-700 text-white rounded-xl py-4 px-6 text-lg font-bold transition-all">
                <i class="fas fa-times-circle mr-2"></i> Still learning
            </button>
            <button id="unsure-btn" class="w-full bg-sky-500 hover:bg-sky-600 active:bg-sky-700 text-white rounded-xl py-4 px-6 text-lg font-bold transition-all">
                <i class="fas fa-question-circle mr-2"></i> Need practice
            </button>
        </section>

        <div id="stats-details" class="mt-6 text-sm text-gray-600"></div>
    </div>

    <script>
        class WordLearningSystem {
            constructor(words) {
                this.words = words;
                this.wordState = { well_known: [], not_known: [], unsure: [] };
                this.history = [];
                this.currentWord = null;
                this.isMarked = false;
                this.lastReviewTime = {};
                this.difficulty = {};
                this.repetitionData = {};
                this.streaks = {};
                this.sessionStats = {
                    startTime: Date.now(),
                    wordsReviewed: 0,
                    correctStreak: 0,
                    bestStreak: 0
                };
            }

            calculateMasteryLevel() {
                const wellKnownCount = this.wordState.well_known.length;
                const totalWords = this.words.length;
                const masteryPercentage = (wellKnownCount / totalWords) * 100;
                const consistencyBonus = this.calculateConsistencyBonus();
                
                const adjustedMastery = masteryPercentage + consistencyBonus;

                if (adjustedMastery >= 100) return 'Legendary III';
                if (adjustedMastery >= 95) return 'Legendary II';
                if (adjustedMastery >= 90) return 'Legendary I';
                if (adjustedMastery >= 80) return 'Mythic III';
                if (adjustedMastery >= 75) return 'Mythic II';
                if (adjustedMastery >= 70) return 'Mythic I';
                if (adjustedMastery >= 60) return 'Advanced III';
                if (adjustedMastery >= 55) return 'Advanced II';
                if (adjustedMastery >= 50) return 'Advanced I';
                if (adjustedMastery >= 40) return 'Basic III';
                if (adjustedMastery >= 35) return 'Basic II';
                if (adjustedMastery >= 30) return 'Basic I';
                if (adjustedMastery >= 20) return 'Trainee III';
                if (adjustedMastery >= 15) return 'Trainee II';
                if (adjustedMastery >= 10) return 'Trainee I';
                if (adjustedMastery >= 5) return 'Rookie III';
                if (adjustedMastery >= 3) return 'Rookie II';
                return 'Rookie I';
            }

            calculateConsistencyBonus() {
                const now = Date.now();
                let consistencyScore = 0;
                
                Object.values(this.lastReviewTime).forEach(time => {
                    const daysSinceReview = (now - time) / (24 * 60 * 60 * 1000);
                    if (daysSinceReview <= 1) consistencyScore += 2;
                    else if (daysSinceReview <= 3) consistencyScore += 1;
                });
                
                return Math.min(consistencyScore, 10);
            }

            calculatePriority(word) {
                const now = Date.now();
                const lastReview = this.lastReviewTime[word.word] || 0;
                const timeSinceReview = now - lastReview;
                const difficulty = this.difficulty[word.word] || word.difficulty || 1;
                const repData = this.repetitionData[word.word] || { interval: 1, correctCount: 0, incorrectCount: 0 };

                let priority = 0;

                // Base difficulty factor
                priority += difficulty * 15;

                // Time decay factor
                const optimalInterval = repData.interval * 24 * 60 * 60 * 1000;
                const overdueRatio = timeSinceReview / optimalInterval;
                priority += Math.max(0, (overdueRatio - 1) * 20);

                // Learning stage factor
                if (!this.wordState.well_known.includes(word.word)) {
                    priority += 25;
                }

                // Error rate factor
                const totalAttempts = repData.correctCount + repData.incorrectCount;
                if (totalAttempts > 0) {
                    const errorRate = repData.incorrectCount / totalAttempts;
                    priority += errorRate * 30;
                }

                // Streak decay factor
                const streak = this.streaks[word.word] || 0;
                if (streak < 3) priority += (3 - streak) * 10;

                return priority;
            }

            getNextWord() {
                const now = Date.now();
                
                const dueWords = this.words.filter(word => {
                    const repData = this.repetitionData[word.word] || { interval: 1 };
                    const lastReview = this.lastReviewTime[word.word] || 0;
                    const dueDate = lastReview + (repData.interval * 24 * 60 * 60 * 1000);
                    return now >= dueDate;
                });

                const candidates = dueWords.length > 0 ? dueWords : this.words;
                
                const wordPriorities = candidates.map(word => ({
                    word,
                    priority: this.calculatePriority(word)
                }));

                wordPriorities.sort((a, b) => {
                    const randomFactor = Math.random() * 0.2 - 0.1;
                    return (b.priority + randomFactor) - (a.priority + randomFactor);
                });

                const topCandidates = wordPriorities.slice(0, 5);
                const totalPriority = topCandidates.reduce((sum, wp) => sum + wp.priority, 0);
                let random = Math.random() * totalPriority;
                
                for (const wp of topCandidates) {
                    random -= wp.priority;
                    if (random <= 0) return wp.word;
                }
                
                return topCandidates[0].word;
            }

            updateStats() {
                const masteryLevel = document.getElementById('mastery-level');
                const wordsLearned = document.getElementById('words-learned');
                const progressLabel = document.getElementById('progress-label');
                const sessionStats = document.getElementById('session-stats');
                const statsDetails = document.getElementById('stats-details');
                
                // Update mastery level and words learned
                masteryLevel.textContent = `Level: ${this.calculateMasteryLevel()}`;
                const wellKnownCount = this.wordState.well_known.length;
                const totalWords = this.words.length;
                wordsLearned.textContent = `${wellKnownCount}/${totalWords} words`;
                
                // Update progress bar and label
                const progress = (wellKnownCount / totalWords) * 100;
                document.getElementById('progress').style.width = `${progress}%`;
                progressLabel.textContent = `${progress.toFixed(1)}%`;
                
                // Update session stats
                const sessionDuration = Math.floor((Date.now() - this.sessionStats.startTime) / 60000);
                sessionStats.textContent = `Session: ${sessionDuration}m | Words: ${this.sessionStats.wordsReviewed} | Streak: ${this.sessionStats.correctStreak}`;
                
                // Show streak bonus if applicable
                const streakBonus = document.getElementById('streak-bonus');
                streakBonus.classList.toggle('hidden', this.sessionStats.correctStreak < 3);
                
                // Update detailed stats
                if (this.currentWord) {
                    const repData = this.repetitionData[this.currentWord.word] || { 
                        correctCount: 0, 
                        incorrectCount: 0 
                    };
                    const totalAttempts = repData.correctCount + repData.incorrectCount;
                    const accuracy = totalAttempts > 0 
                        ? ((repData.correctCount / totalAttempts) * 100).toFixed(1) 
                        : 0;
                    
                    statsDetails.innerHTML = `
                        <div class="grid grid-cols-2 gap-4">
                            <div>Attempts: ${totalAttempts}</div>
                            <div>Accuracy: ${accuracy}%</div>
                            <div>Streak: ${this.streaks[this.currentWord.word] || 0}</div>
                            <div>Difficulty: ${(this.difficulty[this.currentWord.word] || 1).toFixed(1)}</div>
                        </div>
                    `;
                }
            }

            markWord(word, status) {
                const repData = this.repetitionData[word.word] || {
                    interval: 1,
                    correctCount: 0,
                    incorrectCount: 0,
                    lastStatus: null
                };

                // Update repetition data
                if (status === 'well_known') {
                    repData.correctCount++;
                    repData.interval *= 2;
                    this.streaks[word.word] = (this.streaks[word.word] || 0) + 1;
                    this.sessionStats.correctStreak++;
                    this.sessionStats.bestStreak = Math.max(
                        this.sessionStats.bestStreak, 
                        this.sessionStats.correctStreak
                    );
                } else if (status === 'not_known') {
                    repData.incorrectCount++;
                    repData.interval = 1;
                    this.streaks[word.word] = 0;
                    this.sessionStats.correctStreak = 0;
                } else {
                    repData.interval = Math.max(repData.interval * 0.75, 1);
                    this.streaks[word.word] = Math.max((this.streaks[word.word] || 0) - 1, 0);
                    this.sessionStats.correctStreak = 0;
                }

                repData.interval = Math.min(repData.interval, 30);
                repData.lastStatus = status;
                this.repetitionData[word.word] = repData;

                Object.keys(this.wordState).forEach(key => {
                    this.wordState[key] = this.wordState[key].filter(w => w !== word.word);
                });
                this.wordState[status].push(word.word);
                this.lastReviewTime[word.word] = Date.now();

                // Dynamic difficulty adjustment
                if (status === 'well_known') {
                    this.difficulty[word.word] = Math.max((this.difficulty[word.word] || 1) - 0.15, 1);
                } else if (status === 'not_known') {
                    this.difficulty[word.word] = Math.min((this.difficulty[word.word] || 1) + 0.4, 3);
                }

                this.sessionStats.wordsReviewed++;
                this.updateStats();
                this.saveProgress();
            }

            saveProgress() {
                const data = {
                    wordState: this.wordState,
                    lastReviewTime: this.lastReviewTime,
                    difficulty: this.difficulty,
                    repetitionData: this.repetitionData,
                    streaks: this.streaks,
                    sessionStats: this.sessionStats
                };
                localStorage.setItem('wordLearningProgress', JSON.stringify(data));
            }

            loadProgress() {
                const saved = localStorage.getItem('wordLearningProgress');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.wordState = data.wordState;
                    this.lastReviewTime = data.lastReviewTime;
                    this.difficulty = data.difficulty;
                    this.repetitionData = data.repetitionData || {};
                    this.streaks = data.streaks || {};
                    this.sessionStats = data.sessionStats || {
                        startTime: Date.now(),
                        wordsReviewed: 0,
                        correctStreak: 0,
                        bestStreak: 0
                    };
                    this.updateStats();
                }
            }
        }

        // Initialize the word list
        const words = [
        { word: 'द्विगु', meaning: 'दो गायों का समाहार', difficulty: 2 },
            { word: 'त्रिलोक', meaning: 'तीन लोकों का समाहार', difficulty: 2 },
            { word: 'नवरत्न', meaning: 'नव रत्नों का समाहार', difficulty: 1 },
            { word: 'त्रिफला', meaning: 'तीन फलों का समाहार', difficulty: 1 },
            { word: 'सप्ताह', meaning: 'सात दिनों का समूह', difficulty: 2 },
            { word: 'चौमासा', meaning: 'चार मासों का समूह', difficulty: 3 },
            { word: 'दोपहर', meaning: 'दो पहर का समाहार', difficulty: 2 },
            { word: 'चारपाई*', meaning: 'चार पैरों का समाहार', difficulty: 2 },
            { word: 'नवनिधि', meaning: 'नौ निधियों का समाहार', difficulty: 3 },
            { word: 'पंजाब', meaning: 'पाँच आबों (नदियों) का समूह', difficulty: 2 },
            { word: 'चतुर्मुख', meaning: 'चार मुखों का समूह', difficulty: 3 },
            { word: 'सतसई', meaning: 'सात सौ (दोहों) का समाहार', difficulty: 3 },
            { word: 'त्रिभुवन', meaning: 'तीन भुवनों (लोकों) का समूह', difficulty: 2 },
            { word: 'पंचवटी', meaning: 'पाँच वटों (वृक्षों) का समाहार', difficulty: 2 },
            { word: 'अष्टाध्यायी', meaning: 'आठ अध्यायों का समाहार', difficulty: 3 },
            { word: 'पंचतत्व', meaning: 'पाँच तत्वों का समूह', difficulty: 2 },
            { word: 'नवरात्र', meaning: 'नौ रात्रियों का समूह', difficulty: 1 },
            { word: 'दोराहा', meaning: 'दो राहों का समाहार', difficulty: 2 },
            { word: 'अष्टसिद्धि', meaning: 'आठ सिद्धियों का समाहार', difficulty: 3 },
            { word: 'पंचतंत्र', meaning: 'पाँच तंत्रों का समाहार', difficulty: 3 },
            { word: 'त्रिवेणी', meaning: 'तीन वेणियों का समाहार', difficulty: 2 },
            { word: 'शताब्दी', meaning: 'शत (सौ) अब्दों (वर्षों) का समाहार', difficulty: 3 },
            { word: 'सुखप्राप्त', meaning: 'सुख को प्राप्त', difficulty: 2 },
            { word: 'यशप्राप्त', meaning: 'यश को प्राप्त', difficulty: 2 },
            { word: 'शरणागत', meaning: 'शरण को आगत', difficulty: 2 },
            { word: 'ग्रामगत', meaning: 'ग्राम को गात', difficulty: 3 },
            { word: 'स्वर्गगत', meaning: 'स्वर्ग को आगत', difficulty: 2 },
            { word: 'परलोगमन', meaning: 'परलोक को गमन', difficulty: 3 },
            { word: 'जेबकतरा', meaning: 'जेब को कतरने वाला', difficulty: 2 },
            { word: 'तुलसीकृत', meaning: 'तुलसी से कृत', difficulty: 3 },
            { word: 'हस्तलिखित', meaning: 'हस्त से लिखित', difficulty: 2 },
            { word: 'ईश्वरदत्त', meaning: 'ईश्वर द्वारा प्रदत्त', difficulty: 3 },
            { word: 'प्रेमातुर', meaning: 'प्रेम से आतुर', difficulty: 3 },
            { word: 'मनचाहा', meaning: 'मन से चाहा', difficulty: 2 },
            { word: 'मदोध', meaning: 'मद से अंधा', difficulty: 3 },
            { word: 'रेखांकित', meaning: 'रेखा से अंकित', difficulty: 1 },
            { word: 'अकालपीड़ित', meaning: 'अकाल से पीड़ित', difficulty: 2 },
            { word: 'सूररचित', meaning: 'सूर द्वारा रचित', difficulty: 3 },
            { word: 'कष्टसाध्य', meaning: 'कष्ट से साध्य', difficulty: 3 },
            { word: 'भुखमरा', meaning: 'भूख से मरा', difficulty: 2 },
            { word: 'मदमस्त', meaning: 'मद से मस्त', difficulty: 2 },
            { word: 'शोकाकुल', meaning: 'शोक से आकुल', difficulty: 3 },
            { word: 'भयाकुल', meaning: 'भय से आकुल', difficulty: 3 },
            { word: 'रोगमुक्त', meaning: 'रोग से मुक्त', difficulty: 1 },
            { word: 'मनमाना', meaning: 'मन से माना', difficulty: 3 },
            { word: 'मनगढंत', meaning: 'मन से गढ़ा हुआ', difficulty: 3 },
            { word: 'गुणयुक्त', meaning: 'गुण से युक्त', difficulty: 1 },
            { word: 'स्वरचित', meaning: 'स्व से रचित', difficulty: 2 },
            { word: 'दयार्द्र', meaning: 'दया से आर्द्र', difficulty: 3 },
            { word: 'यज्ञशाला', meaning: 'यज्ञ के लिए शाला', difficulty: 3 },
            { word: 'राहखर्च', meaning: 'राह के लिए खर्च', difficulty: 2 },
            { word: 'विद्यालय', meaning: 'विद्या के लिए आलय', difficulty: 1 },
            { word: 'हवनसामग्री', meaning: 'हवन के लिए सामग्री', difficulty: 2 },
            { word: 'गुरुदक्षिणा', meaning: 'गुरु के लिए दक्षिणा', difficulty: 2 },
            { word: 'सत्याग्रह', meaning: 'सत्य के लिए आग्रह', difficulty: 2 },
            { word: 'युद्धभूमि', meaning: 'युद्ध के लिए भूमि', difficulty: 2 },
            { word: 'हथकड़ी', meaning: 'हाथ के लिए कड़ी', difficulty: 1 },
            { word: 'पाठशाला', meaning: 'पाठ के लिए शाला', difficulty: 1 },
            { word: 'धर्मशाला', meaning: 'धर्म के लिए शाला', difficulty: 2 },
            { word: 'मार्गव्यय', meaning: 'मार्ग के लिए व्यय', difficulty: 2 },
            { word: 'देशभक्ति', meaning: 'देश के लिए भक्ति', difficulty: 1 },
            { word: 'रसोईघर', meaning: 'रसोई के लिए घर', difficulty: 1 },
            { word: 'आरामकुर्सी', meaning: 'आराम के लिए कुर्सी', difficulty: 1 },
            { word: 'युद्धक्षेत्र', meaning: 'युद्ध के लिए क्षेत्र', difficulty: 2 },
            { word: 'क्रीड़ाक्षेत्र', meaning: 'क्रीड़ा के लिए क्षेत्र', difficulty: 2 },
            { word: 'गौशाला', meaning: 'गौ के लिए शाला', difficulty: 1 },
            { word: 'देशार्पण', meaning: 'देश के लिए अर्पण', difficulty: 2 },
            { word: 'डाकगाड़ी', meaning: 'डाक के लिए गाड़ी', difficulty: 1 },
            { word: 'मालगोदाम', meaning: 'माल के लिए गोदाम', difficulty: 1 },
            { word: 'प्रयोगशाला', meaning: 'प्रयोग के लिए शाला', difficulty: 2 },
            { word: 'धनहीन', meaning: 'धन से हीन', difficulty: 2 },
            { word: 'ऋणमुक्त', meaning: 'ऋण से मुक्त', difficulty: 2 },
            { word: 'देशनिकाला', meaning: 'देश से निकाला', difficulty: 3 },
            { word: 'विद्याहीन', meaning: 'विद्या से हीन', difficulty: 2 },
            { word: 'पथभ्रष्ट', meaning: 'पथ से भ्रष्ट', difficulty: 3 },
            { word: 'जन्मांध', meaning: 'जन्म से अंधा', difficulty: 2 },
            { word: 'भयभीत', meaning: 'भय से भीत', difficulty: 1 },
            { word: 'नेत्रहीन', meaning: 'नेत्र से हीन', difficulty: 2 },
            { word: 'स्वर्गपतित', meaning: 'स्वर्ग से पतित', difficulty: 3 },
            { word: 'पदच्युत', meaning: 'पद से च्युत', difficulty: 3 },
            { word: 'गुणहीन', meaning: 'गुणों से हीन', difficulty: 2 },
            { word: 'धर्मविमुख', meaning: 'धर्म से विमुख', difficulty: 3 },
            { word: 'जातिच्युत', meaning: 'जाति से च्युत', difficulty: 3 },
            { word: 'रोगमुक्त', meaning: 'रोग से मुक्त', difficulty: 1 },
            { word: 'धर्मभ्रष्ट', meaning: 'धर्म से भ्रष्ट', difficulty: 3 },
            { word: 'देवदास', meaning: 'देव का दास', difficulty: 1 },
            { word: 'राष्ट्रपति', meaning: 'राष्ट्र का पति', difficulty: 1 },
            { word: 'राजपुत्र', meaning: 'राजा का पुत्र', difficulty: 1 },
            { word: 'सेनापति', meaning: 'सेना का पति', difficulty: 2 },
            { word: 'उद्योगपति', meaning: 'उद्योग का पति', difficulty: 2 },
            { word: 'घुड़दौड़', meaning: 'घोड़ों की दौड़', difficulty: 1 },
            { word: 'भारतवासी', meaning: 'भारत का वासी', difficulty: 1 },
            { word: 'जलधारा', meaning: 'जल की धारा', difficulty: 1 },
            { word: 'बैलगाड़ी', meaning: 'बैल की गाड़ी', difficulty: 1 },
            { word: 'राजसभा', meaning: 'राजा की सभा', difficulty: 1 },
            { word: 'भ्रातृस्नेह', meaning: 'भ्रातृ का स्नेह', difficulty: 2 },
            { word: 'प्रेमसागर', meaning: 'प्रेम का सागर', difficulty: 1 },
            { word: 'दीनानाथ', meaning: 'दीनों का नाथ', difficulty: 2 },
            { word: 'प्रसंगानुसार', meaning: 'प्रसंग के अनुसार', difficulty: 2 },
            { word: 'प्रजापति', meaning: 'प्रजा का पति', difficulty: 2 },
            { word: 'अमृतधारा', meaning: 'अमृत की धारा', difficulty: 2 },
            { word: 'मृत्युदंड', meaning: 'मृत्यु का दंड', difficulty: 2 },
            { word: 'पराधीन', meaning: 'पर के अधीन', difficulty: 3 },
            { word: 'आज्ञानुसार', meaning: 'आज्ञा के अनुसार', difficulty: 2 },
            { word: 'राजनीतिज्ञ', meaning: 'राजनीति का ज्ञाता', difficulty: 2 },
            { word: 'देशवासी', meaning: 'देश का वासी', difficulty: 1 },
            { word: 'गंगातट', meaning: 'गंगा का तट', difficulty: 1 },
            { word: 'सचिवालय', meaning: 'सचिव का आलय', difficulty: 1 },
            { word: 'राजभक्ति', meaning: 'राजा की भक्ति', difficulty: 2 },
            { word: 'परनिंदा', meaning: 'पर की निंदा', difficulty: 2 },
            { word: 'जीवनसाथी', meaning: 'जीवन का साथी', difficulty: 1 },
            { word: 'राजकुमार', meaning: 'राजा का कुमार', difficulty: 1 },
            { word: 'दशरथपुत्र', meaning: 'दशरथ का पुत्र', difficulty: 2 },
            { word: 'राजपुरुष', meaning: 'राजा का पुरुष', difficulty: 2 },
            { word: 'विद्यासागर', meaning: 'विद्या का सागर', difficulty: 2 },
            { word: 'लखपति', meaning: 'लाखों का पति', difficulty: 2 },
            { word: 'युद्धनिपुण', meaning: 'युद्ध में निपुण', difficulty: 3 },
            { word: 'दानवीर', meaning: 'दान में वीर', difficulty: 2 },
            { word: 'ग्रामवास', meaning: 'ग्राम में वास', difficulty: 1 },
            { word: 'घुड़सवार', meaning: 'घोड़े पर सवार', difficulty: 2 },
            { word: 'आपबीती', meaning: 'आप पर बीती', difficulty: 2 },
            { word: 'गृहप्रवेश', meaning: 'गृह में प्रवेश', difficulty: 1 },
            { word: 'आनंदमग्न', meaning: 'आनंद में मग्न', difficulty: 2 },
            { word: 'व्यवहारकुशल', meaning: 'व्यवहार में कुशल', difficulty: 2 },
            { word: 'कुलश्रेष्ठ', meaning: 'कुल में श्रेष्ठ', difficulty: 2 },
            { word: 'कलानुिपण', meaning: 'कला में निपुण', difficulty: 3 },
            { word: 'देशाटन', meaning: 'देश में अटन', difficulty: 2 },
            { word: 'धर्मवीर', meaning: 'धर्म में वीर', difficulty: 2 },
            { word: 'ध्यानमग्न', meaning: 'ध्यान में मग्न', difficulty: 2 },
            { word: 'नीतिनिपुण', meaning: 'नीति में निपुण', difficulty: 3 },
            { word: 'पुरुषोत्तम', meaning: 'पुरुषों में उत्तम', difficulty: 2 },
            { word: 'युद्धवीर', meaning: 'युद्ध में वीर', difficulty: 2 },
            { word: 'नगरनिवास', meaning: 'नगर में निवास', difficulty: 1 },
            { word: 'वनवास', meaning: 'वन में वास', difficulty: 1 },
            { word: 'शरणागत', meaning: 'शरण में आगत', difficulty: 2 },
            { word: 'जगबीती', meaning: 'जग में बीती', difficulty: 2 },
            { word: 'दानवीर', meaning: 'दान में वीर', difficulty: 2 },
            { word: 'सिरदर्द', meaning: 'सिर में दर्द', difficulty: 1 },
            { word: 'विचारमग्न', meaning: 'विचार में मग्न', difficulty: 2 },
            { word: 'अन्याय', meaning: 'न न्याय', difficulty: 1 },
            { word: 'असफल', meaning: 'न सफल', difficulty: 1 },
            { word: 'अधर्म', meaning: 'न धर्म', difficulty: 1 },
            { word: 'अनीति', meaning: 'न नीति', difficulty: 1 },
            { word: 'अनुदार', meaning: 'न उदार', difficulty: 1 },
            { word: 'अपठित', meaning: 'न पठित', difficulty: 1 },
            { word: 'नास्तिक', meaning: 'न आस्तिक', difficulty: 2 },
            { word: 'अज्ञान', meaning: 'न ज्ञान', difficulty: 1 },
            { word: 'अनपढ़', meaning: 'न पढ़ा लिखा', difficulty: 1 },
            { word: 'अनादि', meaning: 'न आदि', difficulty: 1 },
            { word: 'अनिच्छा', meaning: 'न इच्छा', difficulty: 2 },
            { word: 'अनंत', meaning: 'न अंत', difficulty: 2 },
            { word: 'अकर्मण्य', meaning: 'न कर्मण्य', difficulty: 2 },
            { word: 'अभाव', meaning: 'न भाव', difficulty: 1 },
            { word: 'अजर', meaning: 'न जर', difficulty: 1 },
            { word: 'अमर', meaning: 'न मर', difficulty: 1 },
            { word: 'अयोग्य', meaning: 'न योग्य', difficulty: 2 },
            { word: 'असंभव', meaning: 'न संभव', difficulty: 2 },
            { word: 'अनहोनी', meaning: 'न होनी', difficulty: 2 },
            { word: 'अनर्थ', meaning: 'न अर्थ', difficulty: 1 },
            { word: 'अनाथ', meaning: 'न नाथ', difficulty: 1 },
            { word: 'नीलकमल', meaning: 'नीला है जो कमल', difficulty: 2 },
            { word: 'महादेव', meaning: 'महान है जो देव', difficulty: 2 },
            { word: 'पुरुषोत्तम', meaning: 'पुरुषों में है जो उत्तम', difficulty: 2 },
            { word: 'श्वेतांबर', meaning: 'श्वेत है जो अंबर (वस्त्र)', difficulty: 2 },
            { word: 'परमानंद', meaning: 'परम है जो आनंद', difficulty: 2 },
            { word: 'सद्धर्म', meaning: 'सत् है जो धर्म', difficulty: 2 },
            { word: 'भलामानस', meaning: 'भला है जो मानस', difficulty: 2 },
            { word: 'नीलगगन', meaning: 'नीला है जो गगन', difficulty: 2 },
            { word: 'लालटोपी', meaning: 'लाल है जो टोपी', difficulty: 1 },
            { word: 'अंधकूप', meaning: 'अंधा है जो कूप', difficulty: 2 },
            { word: 'महाविद्यालय', meaning: 'महान है जो विद्यालय', difficulty: 2 },
            { word: 'लालछड़ी', meaning: 'लाल है जो छड़ी', difficulty: 1 },
            { word: 'अधपका', meaning: 'आधा है जो पका', difficulty: 1 },
            { word: 'नीलांबर', meaning: 'नीला है जो अंबर', difficulty: 2 },
            { word: 'महाराज', meaning: 'महान है जो राजा', difficulty: 1 },
            { word: 'सज्जन', meaning: 'सत है जो जन', difficulty: 2 },
            { word: 'पीतांबर', meaning: 'पीत है जो अंबर', difficulty: 2 },
            { word: 'कृष्णसर्प', meaning: 'कृष्ण है जो सर्प', difficulty: 2 },
            { word: 'महावीर', meaning: 'महान है जो वीर', difficulty: 2 },
            { word: 'महात्मा', meaning: 'महान है जो आत्मा', difficulty: 2 },
            { word: 'महापुरुष', meaning: 'महान है जो पुरुष', difficulty: 2 },
            { word: 'दुरात्मा', meaning: 'दुर् (बुरी) है जो आत्मा', difficulty: 2 },
            { word: 'प्रधानाध्यापक', meaning: 'प्रधान है जो अध्यापक', difficulty: 2 },
            { word: 'कुबुद्धि', meaning: 'कु (बुरी) है जो बुद्धि', difficulty: 2 },
            { word: 'कापुरुष', meaning: 'कायर है जो पुरुष', difficulty: 2 },
            { word: 'पर्णकुटी', meaning: 'पर्ण से बनी कुटी', difficulty: 2 },
            { word: 'नीलकंठ', meaning: 'नीला है जो कंठ', difficulty: 2 },
            { word: 'प्रधानमंत्री', meaning: 'प्रधान है जो मंत्री', difficulty: 2 },
            { word: 'कालीमिर्च', meaning: 'काली है जो मिर्च', difficulty: 2 },
            { word: 'देहलता', meaning: 'लता रूपी देह', difficulty: 2 },
            { word: 'चरणकमल', meaning: 'कमल के समान चरण', difficulty: 2 },
            { word: 'चंद्रमुख', meaning: 'चंद्र के समान मुख', difficulty: 2 },
            { word: 'भुजदंड', meaning: 'दंड के समान भुजा', difficulty: 2 },
            { word: 'विद्याधन', meaning: 'विद्या रूपी धन', difficulty: 2 },
            { word: 'कनकलता', meaning: 'कनक के समान लता', difficulty: 2 },
            { word: 'कमलनयन', meaning: 'कमल के समान नयन', difficulty: 2 },
            { word: 'घनश्याम', meaning: 'घन के समान श्याम (काला)', difficulty: 2 },
            { word: 'वचनामृत', meaning: 'अमृत रूपी वचन', difficulty: 2 },
            { word: 'क्रोधाग्नि', meaning: 'क्रोध रूपी अग्नि', difficulty: 2 },
            { word: 'भवजल', meaning: 'भव रूपी जल', difficulty: 2 },
            { word: 'संसारसागर', meaning: 'संसार रूपी सागर', difficulty: 2 },
            { word: 'आशालता', meaning: 'आशा की लता', difficulty: 2 },
            { word: 'असिमुद्र', meaning: 'समुद्रपर्यंत (अव्ययीभाव)', difficulty: 2 },
            { word: 'आमरण', meaning: 'मरण-पर्यंत (अव्ययीभाव)', difficulty: 2 },
            { word: 'आजन्म', meaning: 'जन्म से लेकर (अव्ययीभाव)', difficulty: 2 },
            { word: 'आजानु', meaning: 'जानुओं (घुटनों) तक (अव्ययीभाव)', difficulty: 2 },
            { word: 'आज्ञानुसार', meaning: 'आज्ञा के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथाशक्ति', meaning: 'शक्ति के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथासंभव', meaning: 'जैसा संभव हो (अव्ययीभाव)', difficulty: 2 },
            { word: 'यचानियम', meaning: 'नियम के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथामति', meaning: 'मति के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथाशीघ्र', meaning: 'जितना शीघ्र हो सके (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथासामर्थ्य', meaning: 'सामर्थ्य के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'यथोचित', meaning: 'जितना उचित हो (अव्ययीभाव)', difficulty: 2 },
            { word: 'प्रत्यक्ष', meaning: 'आँखों के सामने (अव्ययीभाव)', difficulty: 2 },
            { word: 'प्रतिदिन', meaning: 'दिन-दिन / हर दिन (अव्ययीभाव)', difficulty: 2 },
            { word: 'प्रत्येक', meaning: 'एक-एक (अव्ययीभाव)', difficulty: 1 },
            { word: 'प्रतिवर्ष', meaning: 'वर्ष-वर्ष / हर वर्ष (अव्ययीभाव)', difficulty: 2 },
            { word: 'भरपेठ', meaning: 'पेट भरकर (अव्ययीभाव)', difficulty: 1 },
            { word: 'भरसक', meaning: 'पूरी शक्ति से (अव्ययीभाव)', difficulty: 1 },
            { word: 'भरपूर', meaning: 'पूरा भरा हुआ (अव्ययीभाव)', difficulty: 1 },
            { word: 'द्वार-द्वार', meaning: 'हर एक द्वार (अव्ययीभाव)', difficulty: 1 },
            { word: 'घर-घर', meaning: 'प्रत्येक घर (अव्ययीभाव)', difficulty: 1 },
            { word: 'रातों-रात', meaning: 'रात ही रात (अव्ययीभाव)', difficulty: 1 },
            { word: 'हाथों-हाथ', meaning: 'हाथ ही हाथ में (अव्ययीभाव)', difficulty: 1 },
            { word: 'बीचों-बीच', meaning: 'बीच ही बीच में (अव्ययीभाव)', difficulty: 1 },
            { word: 'साफ-साफ', meaning: 'बिल्कुल स्पष्ट (अव्ययीभाव)', difficulty: 1 },
            { word: 'यथाविधि', meaning: 'विधि के अनुसार (अव्ययीभाव)', difficulty: 1 },
            { word: 'अनजाने', meaning: 'जाने बिना (अव्ययीभाव)', difficulty: 2 },
            { word: 'बेशक', meaning: 'बिना संदेह (अव्ययीभाव)', difficulty: 2 },
            { word: 'बेकाम', meaning: 'काम के बिना (अव्ययीभाव)', difficulty: 2 },
            { word: 'बेफायदा', meaning: 'फायदे के बिना (अव्ययीभाव)', difficulty: 2 },
            { word: 'सादर', meaning: 'आदर सहित (अव्ययीभाव)', difficulty: 2 },
            { word: 'अनुरूप', meaning: 'रूप के योग्य (अव्ययीभाव)', difficulty: 2 },
            { word: 'बखूबी', meaning: 'खूबी के साथ (अव्ययीभाव)', difficulty: 2 },
            { word: 'बाकायदा', meaning: 'कायदे के अनुसार (अव्ययीभाव)', difficulty: 2 },
            { word: 'बेमतलब', meaning: 'मतलब के बिना (अव्ययीभाव)', difficulty: 2 },
            { word: 'निस्संदेह', meaning: 'संदेह रहित (अव्ययीभाव)', difficulty: 2 },
            { word: 'राधा-कृष्ण', meaning: 'राधा और कृष्ण', difficulty: 1 },
            { word: 'राजा-रंक', meaning: 'राजा और रंक', difficulty: 1 },
            { word: 'दाल-रोटी', meaning: 'दाल और रोटी', difficulty: 1 },
            { word: 'राम-लक्ष्मण', meaning: 'राम और लक्ष्मण', difficulty: 1 },
            { word: 'आटा-दाल', meaning: 'आटा और दाल', difficulty: 1 },
            { word: 'दाल-चावल', meaning: 'दाल और चावल', difficulty: 1 },
            { word: 'माँ-बाप', meaning: 'माँ और बाप', difficulty: 1 },
            { word: 'सुख-दुख', meaning: 'सुख और दुख', difficulty: 1 },
            { word: 'छोटा-बड़ा', meaning: 'छोटा और बड़ा', difficulty: 1 },
            { word: 'भला-बुरा', meaning: 'भला और बुरा', difficulty: 1 },
            { word: 'अमीर-गरीब', meaning: 'अमीर और गरीब', difficulty: 1 },
            { word: 'पाप-पुण्य', meaning: 'पाप और पुण्य', difficulty: 1 },
            { word: 'ऊँच-नीच', meaning: 'ऊँच और नीच', difficulty: 1 },
            { word: 'धर्म-अधर्म', meaning: 'धर्म और अधर्म', difficulty: 1 },
            { word: 'जन्म-मरण', meaning: 'जन्म और मरण', difficulty: 1 },
            { word: 'खरा-खोटा', meaning: 'खरा और खोटा', difficulty: 1 },
            { word: 'रात-दिन', meaning: 'रात और दिन', difficulty: 1 },
            { word: 'देश-विदेश', meaning: 'देश और विदेश', difficulty: 1 },
            { word: 'पूर्व-पश्चिम', meaning: 'पूर्व और पश्चिम', difficulty: 1 },
            { word: 'लोभ-मोह', meaning: 'लोभ और मोह', difficulty: 1 },
            { word: 'पृथ्वी-आकाश', meaning: 'पृथ्वी और आकाश', difficulty: 1 },
            { word: 'जल-थल', meaning: 'जल और थल', difficulty: 1 },
            { word: 'नदी-नाले', meaning: 'नदी और नाले', difficulty: 1 },
            { word: 'नर-नारी', meaning: 'नर और नारी', difficulty: 1 },
            { word: 'धनी-मानी', meaning: 'धनी और मानी', difficulty: 1 },
            { word: 'वेद-पुराण', meaning: 'वेद और पुराण', difficulty: 1 },
            { word: 'त्रिलोचन', meaning: 'तीन हैं लोचन जिसके अर्थात् शंकर', difficulty: 2 },
            { word: 'चारपाई', meaning: 'चार हैं पाए जिसके अर्थात् चारपाई', difficulty: 1 },
            { word: 'दिगंबर', meaning: 'दिशाएँ ही हैं अंबर (वस्त्र) जिसका वह (शंकर या जैन मुनि)', difficulty: 2 },
            { word: 'नीलकंठ', meaning: 'नीला है कंठ जिसका अर्थात् शंकर', difficulty: 1 },
            { word: 'कमलनयन', meaning: 'कमल के समान नयन हैं जिसके अर्थात् विष्णु', difficulty: 2 },
            { word: 'पंचानन', meaning: 'पाँच हैं आनन जिसके अर्थात् सिंह या शिव', difficulty: 2 },
            { word: 'अष्टाध्यायी', meaning: 'आठ अध्यायों वाला (पाणिनि का व्याकरण)', difficulty: 3 },
            { word: 'चक्रधर', meaning: 'चक्र को धारण करने वाला अर्थात् विष्णु', difficulty: 2 },
            { word: 'विषधर', meaning: 'विष को धारण करने वाला अर्थात् शंकर', difficulty: 2 },
            { word: 'लंबोदर', meaning: 'लंबा है उदर जिसका अर्थात् गणेश', difficulty: 2 },
            { word: 'दशमुख', meaning: 'दश मुख वाला अर्थात् रावण', difficulty: 2 },
            { word: 'गजानन', meaning: 'गज के समान आनन (मुख) वाला अर्थात् गणेश', difficulty: 2 },
            { word: 'तिरंगा', meaning: 'तीन रंगों वाला अर्थात् भारत का राष्ट्रध्वज', difficulty: 2 },
            { word: 'पीतांबर', meaning: 'पीत अंबर (वस्त्र) वाला अर्थात् श्रीकृष्ण', difficulty: 2 },
            { word: 'षडानन', meaning: 'षड् (छ:) हैं आनन जिसके अर्थात् कार्तिकेय', difficulty: 2 },
            { word: 'अल्पबुद्धि', meaning: 'अल्प है बुद्धि जिसकी अर्थात् व्यक्ति-विशेष', difficulty: 1 },
            { word: 'दशानन', meaning: 'दश हैं आनन जिसके अर्थात् रावण', difficulty: 2 },
            { word: 'सुलोचना', meaning: 'सुंदर हैं लोचन जिसके (सुंदर नयनों वाली स्त्री)', difficulty: 2 },
            { word: 'चक्रपाणि', meaning: 'चक्र है हाथ में जिसके अर्थात् विष्णु', difficulty: 2 },
            { word: 'अंशुमाली', meaning: 'अंशु (किरणें) हैं माला जिसकी अर्थात् सूर्य', difficulty: 3 },
            { word: 'पतझड़', meaning: 'झड़ते हैं पत्ते जिसमें अर्थात् ऋतु विशेष', difficulty: 2 },
            { word: 'पंकज', meaning: 'पंक (कीचड़) में पैदा हो जो (कमल)', difficulty: 2 },
            { word: 'चंद्रशेखर', meaning: 'शेखर (माथे) पर चंद्र है जिसके (शिवजी)', difficulty: 2 },
            { word: 'घनश्याम', meaning: 'घन के समान श्याम है जो (कृष्ण)', difficulty: 2 },
            { word: 'मयूरवाहन', meaning: 'मयूर की सवारी है जिसकी (कातकेय)', difficulty: 2 },
            { word: 'मृगेंद्र', meaning: 'मृगों का इंद्र (राजा) है जो (सिंह)', difficulty: 2 },
            { word: 'सुकेशी', meaning: 'सुंदर केश (किरणें) हैं जिसके (चाँद)', difficulty: 2 },
            { word: 'चतुर्मुख', meaning: 'चार हैं मुख जिसके (ब्रह्मा)', difficulty: 2 },
            { word: 'सहस्त्रबाहु', meaning: 'सहस्त्र भुजाएँ हैं जिसकी (कार्तवीर्य अर्जुन)', difficulty: 2 },
            { word: 'चतुर्भुज', meaning: 'चार भुजाएँ हैं जिसकी (विष्णु)', difficulty: 2 },
            { word: 'पद्मासना', meaning: 'पद्म (कमल) आसन है जिसका (सरस्वती)', difficulty: 2 },
            { word: 'कुसुमाकर', meaning: 'कुसुमों (फूलों) का खजाना है जो (वसंत)', difficulty: 2 },
            { word: 'मृत्युंजय', meaning: 'मृत्यु को जीतने वाला (शंकर)', difficulty: 2 },
            { word: 'मृगलोचन', meaning: 'मृग जैसे लोचन हैं जिसके (स्त्री-विशेष)', difficulty: 2 },
            { word: 'कुरूप', meaning: 'असुंदर रूप वाला (व्यक्ति-विशेष)', difficulty: 1 },
            { word: 'उदारहृदय', meaning: 'उदार है हृदय जिसका (व्यक्ति-विशेष)', difficulty: 1 },
            { word: 'प्रधानमंत्री', meaning: 'मंत्रियों में प्रधान है जो (पद-विशेष)', difficulty: 2 },
            { word: 'महावीर', meaning: 'महान वीर है जो (हनुमान जी)', difficulty: 2 },
            { word: 'विश्वविजयी', meaning: 'विश्व का विजयी (तत्पुरुष समास)', difficulty: 2 },
            { word: 'देशभक्ति', meaning: 'देश की भक्ति (तत्पुरुष समास)', difficulty: 2 },
            { word: 'दुर्भाग्य', meaning: 'बुरा भाग्य (अव्ययीभाव समास)', difficulty: 2 },
            { word: 'परलोक', meaning: 'दूसरा लोक (अव्ययीभाव समास)', difficulty: 2 },
            { word: 'वियोगिनी', meaning: 'वियोग में डूबी है जो (बहुव्रीहि समास)', difficulty: 2 },
            { word: 'हिमपात', meaning: 'हिम का पात (तत्पुरुष समास)', difficulty: 2 },
            { word: 'रेलगाड़ी', meaning: 'रेल की गाड़ी (तत्पुरुष समास)', difficulty: 2 },
            { word: 'पर्वतारोही', meaning: 'पर्वत का अरोही (तत्पुरुष समास)', difficulty: 2 },
            { word: 'श्रमसाध्य', meaning: 'श्रम से साध्य (तत्पुरुष समास)', difficulty: 2 },
            { word: 'आश्चर्यचकित', meaning: 'आश्चर्य से चकित (तत्पुरुष समास)', difficulty: 2 },
            { word: 'निस्संकोच', meaning: 'बिना संकोच के (अव्ययीभाव समास)', difficulty: 2 },
            { word: 'मार्मिक', meaning: 'मर्म को छूने वाली (बहुव्रीहि समास)', difficulty: 2 },
            { word: 'सपरिवार', meaning: 'परिवार सहित (अव्ययीभाव समास)', difficulty: 2 },
            { word: 'विश्वविख्यात', meaning: 'विश्व में विख्यात (तत्पुरुष समास)', difficulty: 2 },
            { word: 'सुयोग्य', meaning: 'योग्य है जो (बहुव्रीहि समास)', difficulty: 2 },
            { word: 'प्रयोगशाला', meaning: 'प्रयोग की शाला (तत्पुरुष समास)', difficulty: 2 },
            { word: 'शोधकार्य', meaning: 'शोध का कार्य (तत्पुरुष समास)', difficulty: 2 },
            { word: 'भारतीय', meaning: 'भारत में रहने वाले (बहुव्रीहि समास)', difficulty: 2 },
            { word: 'मदमस्त', meaning: 'मद से मस्त (तत्पुरुष समास)', difficulty: 2 },
            { word: 'क्रांतिकारी', meaning: 'क्रांति लाने वाला (बहुव्रीहि समास)', difficulty: 2 },
            { word: 'राजपुरुष', meaning: 'राजा का पुरुष (तत्पुरुष समास)', difficulty: 2 },
            { word: 'उलटना-पुलटना', meaning: 'उलटना और पुलटना (द्वंद्व समास)', difficulty: 2 },
            { word: 'महादेव', meaning: 'देवों में महान है जो देव (कर्मधारय समास)', difficulty: 2 },
        ];

        // Initialize the learning system
        const learningSystem = new WordLearningSystem(words);
        learningSystem.loadProgress();

        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `fixed top-8 left-1/2 -translate-x-1/2 py-3 px-6 rounded-xl font-bold transition-opacity duration-300 ${
                type === 'success' ? 'bg-emerald-500' : 'bg-red-500'
            } text-white opacity-100`;
            
            setTimeout(() => {
                feedback.style.opacity = '0';
            }, 2000);
        }

        function updateDifficultyIndicator(word) {
            const difficulty = learningSystem.difficulty[word.word] || word.difficulty || 1;
            const indicator = document.getElementById('difficulty-indicator');
            let stars = '★'.repeat(Math.round(difficulty));
            stars += '☆'.repeat(3 - Math.round(difficulty));
            indicator.textContent = `Difficulty: ${stars}`;
        }

        function getRandomWord() {
            if (!learningSystem.isMarked && learningSystem.currentWord) {
                showFeedback('Please mark the current word first!', 'error');
                return;
            }

            learningSystem.currentWord = learningSystem.getNextWord();
            
            const wordContainer = document.getElementById('word-container');
            const wordDisplay = wordContainer.querySelector('div');
            wordDisplay.textContent = learningSystem.currentWord.word;
            updateDifficultyIndicator(learningSystem.currentWord);
            
            document.getElementById('answer-container').classList.add('hidden');
            document.getElementById('mark-section').classList.remove('hidden');
            document.getElementById('stats-details').innerHTML = '';
            learningSystem.isMarked = false;

            // Animation
            wordDisplay.classList.remove('word-animate');
            void wordDisplay.offsetWidth; // Trigger reflow
            wordDisplay.classList.add('word-animate');
        }

        function revealAnswer() {
            if (!learningSystem.currentWord) return;
            
            const answerContainer = document.getElementById('answer-container');
            answerContainer.querySelector('div').textContent = learningSystem.currentWord.meaning;
            answerContainer.classList.remove('hidden');
            
            const repData = learningSystem.repetitionData[learningSystem.currentWord.word] || {
                correctCount: 0,
                incorrectCount: 0
            };
            
            const wordStats = document.getElementById('word-stats');
            const totalAttempts = repData.correctCount + repData.incorrectCount;
            const accuracy = totalAttempts > 0 
                ? ((repData.correctCount / totalAttempts) * 100).toFixed(1) 
                : 0;
            
            wordStats.textContent = `Attempts: ${totalAttempts} | Accuracy: ${accuracy}%`;
        }

    // Function to attach event listeners
    function attachMarkEventListeners() {
        document.getElementById('well-known-btn').addEventListener('click', () => markWord('well_known'));
        document.getElementById('not-known-btn').addEventListener('click', () => markWord('not_known'));
        document.getElementById('unsure-btn').addEventListener('click', () => markWord('unsure'));
    }

    // Call this function whenever the section is shown or updated
    attachMarkEventListeners();

    function markWord(status) {
        if (!learningSystem.currentWord) {
            showFeedback('No word to mark!', 'error');
            return;
        }

        learningSystem.markWord(learningSystem.currentWord, status);

        const statusMessages = {
            well_known: 'Great job! Word marked as known',
            not_known: 'Keep practicing! Word marked for review',
            unsure: 'No problem! We\'ll review this word again soon'
        };

        showFeedback(statusMessages[status], status === 'well_known' ? 'success' : 'error');
        learningSystem.isMarked = true;

        const wordContainer = document.getElementById('word-container');
        const wordDisplay = wordContainer.querySelector('div');
        wordDisplay.textContent = 'Next?!';
        document.getElementById('answer-container').classList.add('hidden');
        document.getElementById('mark-section').classList.add('hidden');
        document.getElementById('difficulty-indicator').textContent = '';
    }
        

        // Event listeners
        document.getElementById('get-word-btn').addEventListener('click', getRandomWord);
        document.getElementById('reveal-answer-btn').addEventListener('click', revealAnswer);

        // Initialize stats
        learningSystem.updateStats();
    </script>
</body>
</html>
